<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Vue3 基础知识 - Suemor Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Suemor Blog"><meta name="msapplication-TileImage" content="/img/head.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Suemor Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="最近正在学习Vue3，尝试把一些重点和踩过的坑给记录下来。 准备首先我们使用npm init vue@latest来创建一个Vue3项目，本文所使用的是Ts+Vite的组合，开发工具为Vscode，Vscode推荐使用插件Vue Language Features(Volar)，这个插件改过名称，实际就是官方推荐的Volar。另外请关闭Vetur等连体插件，因为Volar已经集成Vetur的功能，"><meta property="og:type" content="blog"><meta property="og:title" content="Vue3 基础知识"><meta property="og:url" content="https://www.suemor.com/2022/01/30/Vue3+TS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="Suemor Blog"><meta property="og:description" content="最近正在学习Vue3，尝试把一些重点和踩过的坑给记录下来。 准备首先我们使用npm init vue@latest来创建一个Vue3项目，本文所使用的是Ts+Vite的组合，开发工具为Vscode，Vscode推荐使用插件Vue Language Features(Volar)，这个插件改过名称，实际就是官方推荐的Volar。另外请关闭Vetur等连体插件，因为Volar已经集成Vetur的功能，"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://suemor.oss-cn-beijing.aliyuncs.com/img/wallhaven-q25mvd.jpeg"><meta property="article:published_time" content="2022-01-30T08:22:00.000Z"><meta property="article:modified_time" content="2022-02-03T08:18:22.643Z"><meta property="article:author" content="Suemor"><meta property="article:tag" content="前端"><meta property="article:tag" content="vue3"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://suemor.oss-cn-beijing.aliyuncs.com/img/wallhaven-q25mvd.jpeg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.suemor.com/2022/01/30/Vue3+TS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},"headline":"Vue3 基础知识","image":[],"datePublished":"2022-01-30T08:22:00.000Z","dateModified":"2022-02-03T08:18:22.643Z","author":{"@type":"Person","name":"Suemor"},"publisher":{"@type":"Organization","name":"Suemor Blog","logo":{"@type":"ImageObject"}},"description":"最近正在学习Vue3，尝试把一些重点和踩过的坑给记录下来。 准备首先我们使用npm init vue@latest来创建一个Vue3项目，本文所使用的是Ts+Vite的组合，开发工具为Vscode，Vscode推荐使用插件Vue Language Features(Volar)，这个插件改过名称，实际就是官方推荐的Volar。另外请关闭Vetur等连体插件，因为Volar已经集成Vetur的功能，"}</script><link rel="canonical" href="https://www.suemor.com/2022/01/30/Vue3+TS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="icon" href="/img/head.jpg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Suemor Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://suemor.oss-cn-beijing.aliyuncs.com/img/wallhaven-q25mvd.jpeg" alt="Vue3 基础知识"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-01-30T08:22:00.000Z" title="2022/1/30 下午4:22:00">2022-01-30</time>发表</span><span class="level-item"><time dateTime="2022-02-03T08:18:22.643Z" title="2022/2/3 下午4:18:22">2022-02-03</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span><span class="level-item">10 分钟读完 (大约1444个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Vue3 基础知识</h1><div class="content"><p>最近正在学习 Vue3，尝试把一些重点和踩过的坑给记录下来。</p>
<h2 id="准备"><a href="# 准备" class="headerlink" title="准备"></a>准备 </h2><p> 首先我们使用 <code>npm init vue@latest</code> 来创建一个 Vue3 项目，本文所使用的是 Ts+Vite 的组合，开发工具为 Vscode，Vscode 推荐使用插件 <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=johnsoncodehk.volar">Vue Language Features(Volar)</a>，这个插件改过名称，实际就是官方推荐的 Volar。另外请关闭 Vetur 等连体插件，因为 Volar 已经集成 Vetur 的功能，而且 Vetur 在使用<strong>script setup 语法糖</strong> 导入组件时会报其未使用的错误。</p>
<p>如果你使用的是 Chrome 浏览器的话可以安装<a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/vuejs-devtools/ljjemllljcmogpfapbkkighbhhppjdbg?utm_source=chrome-ntp-icon">Vue.js devtools</a>（记得先关闭 Vue2 的扩展）</p>
<span id="more"></span>
<img src="https://suemor.oss-cn-beijing.aliyuncs.com/img/image-20220130013457903.png" alt="vscode 所使用的的插件" style="zoom:50%;" />

<img src="https://suemor.oss-cn-beijing.aliyuncs.com/img/image-20220130014425241.png" alt="使用 Vetur 的错误" style="zoom: 33%;"                            />   

<img src="https://suemor.oss-cn-beijing.aliyuncs.com/img/image-20220130204126176.png" alt="浏览器 Vue3 的扩展" style="zoom:50%;" />



<h2 id="组合式 -API"><a href="# 组合式 -API" class="headerlink" title="组合式 API"></a>组合式 API</h2><h3 id="组合式 -API 介绍"><a href="# 组合式 -API 介绍" class="headerlink" title="组合式 API 介绍"></a>组合式 API 介绍 </h3><p>Vue3 一个很重要的特性那便是从<code> 选项式 API -&gt; 组合式 API</code>的转变， 因为选项式 API 使用 (<code>data</code>、<code>computed</code>、<code>methods</code>、<code>watch</code>) 组件选项来组织逻辑通常都很有效。然而，当我们的组件开始变得更大时，<strong>逻辑关注点 </strong> 的列表也会增长，这会导致组件难以阅读和理解，从而使项目变得越来越难以维护（就是选项式 API 逻辑太分散了，项目做大后不利于维护）。</p>
<p>​    这次新增加的组合式 API 中，它将同一个功能的逻辑和数据放置在了一起，使同一个的功能代码更加聚合。</p>
<p><a href="https://sm.ms/image/5OLimBGVtDPlxWT" target="_blank"><img src="https://i.loli.net/2021/11/12/5OLimBGVtDPlxWT.gif" alt="02.gif"></a></p>
<h3 id="setup 函数简单介绍"><a href="#setup 函数简单介绍" class="headerlink" title="setup 函数简单介绍"></a>setup 函数简单介绍 </h3><p> 因此在 Vue3.0 版本中组合式 API 便出现 setup 函数的写法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//undefined</span><br><span class="line">//beforeCreate</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&#x27;beforeCreate&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>会发现最终输出的结果为 <code>undefined</code> 和<code>beforeCreate</code>，我们可以得出如下结论</p>
<ul>
<li><p><code>setup</code> 函数在任何生命周期函数之前执行</p>
</li>
<li><p><code>setup</code> 函数中你应该避免使用 <code>this</code>, 因为它不会找到组件实例</p>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> count = <span class="number">1</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="javascript">      count</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>你会发现 <code>1</code> 顺利的在你屏幕上显示出来，但是你无论怎么按 button 你的数据都不会发生变化，我们可以得出如下结论</p>
<ul>
<li>setup 中函数定义变量或者对象要写在 return 中，才可以在模板中使用</li>
<li>我们创建的数据并不是响应式的</li>
</ul>
<p><strong>注意: 但是如果你在 Vscode 中如此输入代码的话，template 模板中可能会报 <code> 找不到名称“xxxx”</code>的错误，这是因为在 Vue3.2 中出现了 <code>script setup 语法糖</code> 的写法导致数值无法被 Volar 读取（下方为案例 script setup 语法糖方式的重写）。</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 与上方代码完全相同</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> count = <span class="number">1</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以很明显的发现 <code>script setup 语法糖</code> 有着更少的样板内容，更简洁的代码，因此我们接下来的代码都会以 <code>script setup 语法糖</code> 方式来书写。</p>
<h3 id="响应式组件 ref"><a href="# 响应式组件 ref" class="headerlink" title="响应式组件 ref"></a>响应式组件 ref</h3><p>我们还是使用上方累加的例子，如下我们把它改成响应式的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> count = ref(<span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">  count.value++</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ref 可以创建响应式数据，但不建议包含引用数据类型</li>
<li>在 TypeScript 中通过 value 属性才能读取或者修改数据。</li>
<li>在 template 模板中直接通过变量名称才能获取读取或者修改数据。</li>
<li>详情可见<a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html#%E5%B8%A6-ref-%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8F%98%E9%87%8F">Vue3 官网 -ref 的响应式变量</a></li>
</ul>
<h3 id="响应式组件 reactive"><a href="# 响应式组件 reactive" class="headerlink" title="响应式组件 reactive"></a>响应式组件 reactive</h3><p>我们用 reactive 创建一个引用数据类型的响应式数据，并通过点击按钮改变它的值</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> person = reactive(&#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">&#x27;suemor&#x27;</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">age</span>: <span class="number">18</span></span></span><br><span class="line"><span class="javascript">&#125;)</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> changePerson = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">    person.name = <span class="string">&#x27; 小杰 &#x27;</span>,</span></span><br><span class="line"><span class="javascript">    person.age = <span class="number">28</span></span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"><span class="comment">// const name = reactive(&#x27; 小黄 &#x27;) 无效写法 </span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePerson&quot;</span>&gt;</span> 点我改变 person 属性<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in person&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>reactive 可以创建引用数据类型的响应式数据</li>
<li>reactive 修改值并不需要通过<code>value</code></li>
<li>reactive 函数只能基于引用数据类型创建响应式数据，不能创建基本数据类型</li>
<li>ref 在 Typescript 中使用时需要点上 value, 而 reactive 在 Typescript 中使用时不需要点上 value，在模板中使用时都不需要加 value</li>
</ul>
<h3 id="计算属性 -computed"><a href="# 计算属性 -computed" class="headerlink" title="计算属性 computed"></a>计算属性 computed</h3><p>响应式 API 中 computed 和之前的 组合式 API 的 computed 选项用法类似，但需要先引入：<code>import &#123; computed &#125; from &quot;vue&quot;</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; computed, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> num1 = ref(<span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> num2= ref(<span class="number">1</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> sum = computed(<span class="function">()=&gt;</span>num1.value + num2.value)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>//2</span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>需要先引入：<code>import &#123; computed &#125; from &quot;vue&quot;</code></li>
<li> 回调函数的返回值就是计算结果</li>
</ul>
<h3 id="监听状态 -watch"><a href="# 监听状态 -watch" class="headerlink" title="监听状态 watch"></a>监听状态 watch</h3><p>watch 函数用于监听响应式数据的变化，下面的示例演示了如何使用<code>watch</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"><span class="keyword">import</span> &#123;watch,reactive, ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> person = ref(<span class="string">&#x27;&#x27;</span>)</span></span><br><span class="line"><span class="javascript">  watch(person,<span class="function">(<span class="params">oldValue,newValue</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(oldValue,newValue);</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;person&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot; 请输入姓名 &quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>需要先引入：<code>import &#123; watch &#125; from &quot;vue&quot;</code></li>
<li>用于监听响应式数据的变化</li>
</ul>
<h3 id="defineProps- 和 -defineEmits"><a href="#defineProps- 和 -defineEmits" class="headerlink" title="defineProps 和 defineEmits"></a>defineProps 和 defineEmits</h3><p>在 <code>&lt;script setup&gt;</code> 中必须使用 <code>defineProps</code> 和 <code>defineEmits</code> API 来声明 <code>props</code> 和 <code>emits</code> 。因为我们使用了 Typescript，所以我们可以尝试使用纯类型声明来声明 props 和 emits</p>
<p><strong>子组件</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; props.msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span>点击我调用父组件方法<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="comment">//props</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> props = withDefaults(defineProps&lt;&#123;</span></span><br><span class="line"><span class="javascript">        msg?: string</span></span><br><span class="line"><span class="javascript">    &#125;&gt;(), &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">msg</span>: <span class="string">&#x27; 我是默认值 &#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">//emits</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> emit = defineEmits&lt;&#123;</span></span><br><span class="line"><span class="javascript">        (e:<span class="string">&#x27;on-change&#x27;</span>,<span class="attr">data</span>:string):<span class="keyword">void</span></span></span><br><span class="line"><span class="javascript">    &#125;&gt;()</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> handleClick = <span class="function">()=&gt;</span> emit(<span class="string">&#x27;on-change&#x27;</span>,<span class="string">&#x27; 父组件方法被调用了 &#x27;</span>)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>父组件</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">import</span> TestPropsEmit <span class="keyword">from</span> <span class="string">&#x27;./views/TestPropsEmit.vue&#x27;</span>;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> msg = ref(<span class="string">&#x27; 我是来自父组件的值 &#x27;</span>)</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> handleChange = <span class="function">(<span class="params">data:string</span>)=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(data);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">TestPropsEmit</span> <span class="attr">:msg</span>=<span class="string">&quot;msg&quot;</span> @<span class="attr">on-change</span>=<span class="string">&quot;handleChange&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>最终结果如下图</strong></p>
<img src="https://suemor.oss-cn-beijing.aliyuncs.com/img/image-20220203154838247.png" alt="image-20220203154838247" style="zoom: 33%;" />

<ul>
<li><code>defineProps</code> 和 <code>defineEmits</code> 都是只在 <code>&lt;script setup&gt;</code> 中才能使用的 <strong> 编译器宏</strong>。他们不需要导入且会随着 <code>&lt;script setup&gt;</code> 处理过程一同被编译掉。</li>
<li><code>defineProps</code> 和 <code>defineEmits</code> 在选项传入后，会提供恰当的类型推断。</li>
<li>通过 <code>withDefaults</code> 可以给 <code>props</code> 提供默认值</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>Vue3 基础知识</p><p><a href="https://www.suemor.com/2022/01/30/Vue3+TS学习笔记/">https://www.suemor.com/2022/01/30/Vue3+TS学习笔记/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>Suemor</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2022-01-30</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2022-02-03</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="link-muted mr-2" rel="tag" href="/tags/vue3/">vue3</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2022/01/09/2021%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%932%E7%89%88/"><span class="level-item">2021 年终总结</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/valine/1.4.14/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread',
            appId: "obQ8JTlApDes8HNcmVCiVRHT-9Nh9j0Va",
            appKey: "lExkU6hN5zdW9LFEQz63f1c7",
            
            avatar: "mm",
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: false,
            highlight: true,
            recordIP: false,
            
            
            
            enableQQ: false,
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/head.jpg" alt="Suemor"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Suemor</p><p class="is-size-6 is-block">所谓自由就是可以说二加二等于四的自由</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">6</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">5</p></a></div></div></nav></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E5%AD%A6%E4%B9%A0/"><span class="level-start"><span class="level-item">学习</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%A5%E5%B8%B8/"><span class="level-start"><span class="level-item">日常</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-30T08:22:00.000Z">2022-01-30</time></p><p class="title"><a href="/2022/01/30/Vue3+TS%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">Vue3 基础知识</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-01-09T15:10:07.000Z">2022-01-09</time></p><p class="title"><a href="/2022/01/09/2021%E5%B9%B4%E5%BA%A6%E6%80%BB%E7%BB%932%E7%89%88/">2021 年终总结</a></p><p class="categories"><a href="/categories/%E6%97%A5%E5%B8%B8/">日常</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-06T09:25:38.000Z">2021-11-06</time></p><p class="title"><a href="/2021/11/06/AndroidV5%E5%8C%85%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">AndroidV5 包源码解析</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-20T10:55:25.000Z">2021-08-20</time></p><p class="title"><a href="/2021/08/20/Kotlin%E5%AD%A6%E4%B9%A0-2/">『Kotlin 教程 (2)』 构造器、继承、接口</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-08-19T01:19:31.000Z">2021-08-19</time></p><p class="title"><a href="/2021/08/19/Kotlin%E5%AD%A6%E4%B9%A0-1/">『Kotlin 教程 (1)』 变量、逻辑控制语句、类与空安全机制</a></p><p class="categories"><a href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/01/"><span class="level-start"><span class="level-item">一月 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">十一月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">八月 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kotlin/"><span class="tag">Kotlin</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vue3/"><span class="tag">vue3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">前端</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%B8%B8/"><span class="tag">日常</span><span class="tag">2</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Suemor Blog</a><p class="is-size-7"><span>&copy; 2022 Suemor</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>